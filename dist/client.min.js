function defineModule(a,b){a=a.replace(/\/index$/,""),__commonjs_factories[a]=b}function require(a){function b(a,b){var c=/(\.?\.\/?)*/.exec(a)[0],d=Math.floor(c.replace(/\//g,"").length/1.9+.99);if(d){var e=b.split("/");e=e.slice(0,e.length-d),e=e.join("/"),e&&(a=e+"/"+a.slice(c.length))}return a.replace(/\/$/,"")}var c=__commonjs_modules,d=__commonjs_factories;if(!c[a]){var e="Could not load module: '"+a+"'";if(!d[a])throw new Error(e);var f=function(c){return require(b(c,a))};c[a]={};var g={exports:{}};d[a](f,g.exports,g),c[a]=g.exports}return c[a]}var __commonjs_modules={},__commonjs_factories={};!function(){function removex(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,d)}function domstyle(a){return a.replace(/\-[a-z]/g,function(a){return a.charAt(1).toUpperCase()})}function cssstyle(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function getTag(a){return null===a.firstChild?{UL:"LI",DL:"DT",TR:"TD"}[a.tagName]||a.tagName:a.firstChild.tagName}function wrapHelper(a,b){if(typeof a==string)return wrap(a,getTag(b));var c=document.createElement("div");return c.appendChild(a),c}function wrap(a){var b=document.createElement("div");return b.innerHTML=a,b}function clean(a){var b=/\S/;a.each(function(a){for(var c,d=a,e=d.firstChild,f=-1;e;)c=e.nextSibling,3!=e.nodeType||b.test(e.nodeValue)?e.nodeIndex=++f:d.removeChild(e),e=c})}function _getEventID(a){return a._xuiEventID?a._xuiEventID:a._xuiEventID=++_getEventID.id}function _getRespondersForEvent(a,b){var c=cache[a]=cache[a]||{};return c[b]=c[b]||[]}function _createResponder(a,b,c){var d=_getEventID(a),e=_getRespondersForEvent(d,b),f=function(b){c.call(a,b)===!1&&(b.preventDefault(),b.stopPropagation())};return f.guid=c.guid=c.guid||++_getEventID.id,f.handler=c,e.push(f),f}function hasClass(a,b){return getClassRegEx(b).test(a.className)}function trim(a){return(a||"").replace(rtrim,"")}var undefined,xui,window=this,string=new String("string"),document=window.document,simpleExpr=/^#?([\w-]+)$/,idExpr=/^#/,tagExpr=/<([\w:]+)/,slice=function(a){return[].slice.call(a,0)};try{var a=slice(document.documentElement.childNodes)[0].nodeType}catch(e){slice=function(a){for(var b=[],c=0;a[c];c++)b.push(a[c]);return b}}window.x$=window.xui=xui=function(a,b){return new xui.fn.find(a,b)},[].forEach||(Array.prototype.forEach=function(a){var b=this.length||0,c=0,d=arguments[1];if("function"==typeof a)for(;b>c;c++)a.call(d,this[c],c,this)}),Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1}),xui.fn=xui.prototype={extend:function(a){for(var b in a)xui.fn[b]=a[b]},find:function(a,b){var c,d=[];return a?(b==undefined&&this.length?d=this.each(function(b){d=d.concat(slice(xui(a,b)))}).reduce(d):(b=b||document,typeof a==string?(simpleExpr.test(a)&&b.getElementById&&b.getElementsByTagName?(d=idExpr.test(a)?[b.getElementById(a.substr(1))]:b.getElementsByTagName(a),null==d[0]&&(d=[])):tagExpr.test(a)?(c=document.createElement("i"),c.innerHTML=a,slice(c.childNodes).forEach(function(a){d.push(a)})):d=window.Sizzle!==undefined?Sizzle(a,b):b.querySelectorAll(a),d=slice(d)):a instanceof Array?d=a:a.nodeName||a===window?d=[a]:("[object NodeList]"==a.toString()||"[object HTMLCollection]"==a.toString()||"number"==typeof a.length)&&(d=slice(a))),this.set(d)):this},set:function(a){var b=xui();return b.cache=slice(this.length?this:[]),b.length=0,[].push.apply(b,a),b},reduce:function(a,b){var c=[],a=a||slice(this);return a.forEach(function(a){c.indexOf(a,0,b)<0&&c.push(a)}),c},has:function(a){var b=xui(a);return this.filter(function(){var a=this,c=null;return b.each(function(b){c=c||b==a}),c})},filter:function(a){var b=[];return this.each(function(c,d){a.call(c,d)&&b.push(c)}).set(b)},not:function(a){var b=slice(this),c=xui(a);return c.length?this.filter(function(a){var d;return c.each(function(c){return d=b[a]!=c}),d}):this},each:function(a){for(var b=0,c=this.length;c>b&&a.call(this[b],this[b],b,this)!==!1;++b);return this}},xui.fn.find.prototype=xui.fn,xui.extend=xui.fn.extend,xui.extend({html:function(location,html){if(clean(this),0==arguments.length){var i=[];return this.each(function(a){i.push(a.innerHTML)}),i}if(1==arguments.length&&"remove"!=arguments[0]&&(html=location,location="inner"),"remove"!=location&&html&&html.each!==undefined){if("inner"==location){var d=document.createElement("p");html.each(function(a){d.appendChild(a)}),this.each(function(a){a.innerHTML=d.innerHTML})}else{var that=this;html.each(function(a){that.html(location,a)})}return this}return this.each(function(el){var parent,list,len,i=0;if("inner"==location)if(typeof html==string||"number"==typeof html)for(el.innerHTML=html,list=el.getElementsByTagName("SCRIPT"),len=list.length;len>i;i++)eval(list[i].text);else el.innerHTML="",el.appendChild(html);else if("remove"==location)el.parentNode.removeChild(el);else{var elArray=["outer","top","bottom"],wrappedE=wrapHelper(html,elArray.indexOf(location)>-1?el:el.parentNode),children=wrappedE.childNodes;"outer"==location?el.parentNode.replaceChild(wrappedE,el):"top"==location?el.insertBefore(wrappedE,el.firstChild):"bottom"==location?el.insertBefore(wrappedE,null):"before"==location?el.parentNode.insertBefore(wrappedE,el):"after"==location&&el.parentNode.insertBefore(wrappedE,el.nextSibling);for(var parent=wrappedE.parentNode;children.length;)parent.insertBefore(children[0],wrappedE);parent.removeChild(wrappedE)}})},attr:function(a,b){if(2==arguments.length)return this.each(function(c){c.tagName&&"input"==c.tagName.toLowerCase()&&"value"==a?c.value=b:c.setAttribute&&("checked"!=a||""!=b&&0!=b&&"undefined"!=typeof b?c.setAttribute(a,b):c.removeAttribute(a))});var c=[];return this.each(function(b){b.tagName&&"input"==b.tagName.toLowerCase()&&"value"==a?c.push(b.value):b.getAttribute&&b.getAttribute(a)&&c.push(b.getAttribute(a))}),c}}),"inner outer top bottom remove before after".split(" ").forEach(function(a){xui.fn[a]=function(a){return function(b){return this.html(a,b)}}(a)}),xui.events={};var cache={};xui.extend({on:function(a,b,c){return this.each(function(d){if(xui.events[a]){var e=_getEventID(d),f=_getRespondersForEvent(e,a);c=c||{},c.handler=function(b,c){xui.fn.fire.call(xui(this),a,c)},f.length||xui.events[a].call(d,c)}d.addEventListener(a,_createResponder(d,a,b),!1)})},un:function(a,b){return this.each(function(c){for(var d=_getEventID(c),e=_getRespondersForEvent(d,a),f=e.length;f--;)(b===undefined||b.guid===e[f].guid)&&(c.removeEventListener(a,e[f],!1),removex(cache[d][a],f,1));0===cache[d][a].length&&delete cache[d][a];for(var g in cache[d])return;delete cache[d]})},fire:function(a,b){return this.each(function(c){c!=document||c.dispatchEvent||(c=document.documentElement);var d=document.createEvent("HTMLEvents");d.initEvent(a,!0,!0),d.data=b||{},d.eventName=a,c.dispatchEvent(d)})}}),"click load submit touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend orientationchange".split(" ").forEach(function(a){xui.fn[a]=function(a){return function(b){return b?this.on(a,b):this.fire(a)}}(a)}),xui(window).on("load",function(){"onorientationchange"in document.body||!function(a,b){xui(window).on("resize",function(){var c=window.innerWidth<a&&window.innerHeight>b&&window.innerWidth<window.innerHeight,d=window.innerWidth>a&&window.innerHeight<b&&window.innerWidth>window.innerHeight;(c||d)&&(window.orientation=c?0:90,xui("body").fire("orientationchange"),a=window.innerWidth,b=window.innerHeight)})}(window.innerWidth,window.innerHeight)}),xui.touch=function(){try{return!!document.createEvent("TouchEvent").initTouchEvent}catch(a){return!1}}(),xui.ready=function(a){domReady(a)},_getEventID.id=1,xui.extend({tween:function(a,b){var c=function(){var b={};return"duration after easing".split(" ").forEach(function(c){a[c]&&(b[c]=a[c],delete a[c])}),b},d=function(a){var b,c=[];if(typeof a!=string){for(b in a)c.push(cssstyle(b)+":"+a[b]);c=c.join(";")}else c=a;return c},e=c(a),f=d(a);return this.each(function(a){emile(a,f,e,b)})}});var rtrim=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;xui.extend({setStyle:function(a,b){return a=domstyle(a),this.each(function(c){c.style[a]=b})},getStyle:function(a,b){var c=function(a,b){return document.defaultView.getComputedStyle(a,"").getPropertyValue(cssstyle(b))};if(b===undefined){var d=[];return this.each(function(b){d.push(c(b,a))}),d}return this.each(function(d){b(c(d,a))})},addClass:function(a){var b=a.split(" ");return this.each(function(a){b.forEach(function(b){hasClass(a,b)===!1&&(a.className=trim(a.className+" "+b))})})},hasClass:function(a,b){var c=this,d=a.split(" ");return this.length&&function(){var a=!0;return c.each(function(c){d.forEach(function(d){hasClass(c,d)?b&&b(c):a=!1})}),a}()},removeClass:function(a){if(a===undefined)this.each(function(a){a.className=""});else{var b=a.split(" ");this.each(function(a){b.forEach(function(b){a.className=trim(a.className.replace(getClassRegEx(b),"$1"))})})}return this},toggleClass:function(a){var b=a.split(" ");return this.each(function(a){b.forEach(function(b){a.className=trim(hasClass(a,b)?a.className.replace(getClassRegEx(b),"$1"):a.className+" "+b)})})},css:function(a){for(var b in a)this.setStyle(b,a[b]);return this}});var reClassNameCache={},getClassRegEx=function(a){var b=reClassNameCache[a];return b||(b=new RegExp("(^|\\s+)"+a+"(?:\\s+|$)"),reClassNameCache[a]=b),b};xui.extend({xhr:function(a,b,c){function d(){4==h.readyState&&(delete g.xmlHttpRequest,/^[20]/.test(h.status)&&h.handleResp(),/^[45]/.test(h.status)&&h.handleError())}/^(inner|outer|top|bottom|before|after)$/.test(a)||(c=b,b=a,a="inner");var e=c?c:{};"function"==typeof c&&(e={},e.callback=c);var f,g=this,h=new XMLHttpRequest,i=e.method||"get",j="undefined"!=typeof e.async?e.async:!0,k=e.data||null;h.queryString=k,h.open(i,b,j),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),"post"==i.toLowerCase()&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(f in e.headers)e.headers.hasOwnProperty(f)&&h.setRequestHeader(f,e.headers[f]);return h.handleResp=null!=e.callback?e.callback:function(){g.html(a,h.responseText)},h.handleError=e.error&&"function"==typeof e.error?e.error:function(){},j&&(h.onreadystatechange=d,this.xmlHttpRequest=h),h.send(k),j||d(),this}}),function(a,b){function c(a,b,c){return(a+(b-a)*c).toFixed(3)}function d(a,b,c){return a.substr(b,c||1)}function e(a,b,c){for(var e,f,g,h=2,i=[],j=[];e=3,f=arguments[h-1],h--;)if("r"==d(f,0))for(f=f.match(/\d+/g);e--;)i.push(~~f[e]);else for(4==f.length&&(f="#"+d(f,1)+d(f,1)+d(f,2)+d(f,2)+d(f,3)+d(f,3));e--;)i.push(parseInt(d(f,1+2*e,2),16));for(;e--;)g=~~(i[e+3]+(i[e]-i[e+3])*c),j.push(0>g?0:g>255?255:g);return"rgb("+j.join(",")+")"}function f(a){var b=parseFloat(a),d=a.replace(/^[\-\d\.]+/,"");return isNaN(b)?{v:d,f:e,u:""}:{v:b,f:c,u:d}}function g(a){var b,c,d={},e=i.length;for(h.innerHTML='<div style="'+a+'"></div>',b=h.childNodes[0].style;e--;)(c=b[i[e]])&&(d[i[e]]=f(c));return d}var h=document.createElement("div"),i="backgroundColor borderBottomColor borderBottomWidth borderLeftColor borderLeftWidth borderRightColor borderRightWidth borderSpacing borderTopColor borderTopWidth bottom color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex".split(" ");b[a]=function(a,b,c,d){a="string"==typeof a?document.getElementById(a):a,c=c||{};var e,h,i=g(b),j=a.currentStyle?a.currentStyle:getComputedStyle(a,null),k={},l=+new Date,m=c.duration||200,n=l+m,o=c.easing||function(a){return-Math.cos(a*Math.PI)/2+.5};for(e in i)k[e]=f(j[e]);h=setInterval(function(){var b=+new Date,f=b>n?1:(b-l)/m;for(e in i)a.style[e]=i[e].f(k[e].v,i[e].v,o(f))+i[e].u;b>n&&(clearInterval(h),c.after&&c.after(),d&&setTimeout(d,1))},10)}}("emile",this),!function(a,b){function c(a){for(m=1;a=f.shift();)a()}var d,e,f=[],g=!1,h=b.documentElement,i=h.doScroll,j="DOMContentLoaded",k="addEventListener",l="onreadystatechange",m=/^loade|c/.test(b.readyState);b[k]&&b[k](j,e=function(){b.removeEventListener(j,e,g),c()},g),i&&b.attachEvent(l,d=function(){/^c/.test(b.readyState)&&(b.detachEvent(l,d),c())}),a.domReady=i?function(b){self!=top?m?b():f.push(b):function(){try{h.doScroll("left")}catch(c){return setTimeout(function(){a.domReady(b)},50)}b()}()}:function(a){m?a():f.push(a)}}(this,document)}(),xui.extend({text:function(){var a=[];if(this.length>=1)for(var b=this[0],c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];"#text"===d.nodeName&&a.push(d.nodeValue)}return a}}),function(a){"use strict";function b(a){return void 0==a?"":(a+"").replace(/[&\"<>]/g,function(a){return f[a]})}function c(a){a=a.type?location.hash:a,a!=g&&h.trigger("pop",a),g=a}a.observable=function(a){var b={},c=[].slice;return a.on=function(c,d){return"function"==typeof d&&c.replace(/[^\s]+/g,function(a,c){(b[a]=b[a]||[]).push(d),d.typed=c>0}),a},a.off=function(c){return c.replace(/[^\s]+/g,function(a){b[a]=[]}),"*"==c&&(b={}),a},a.one=function(b,c){return c&&(c.one=!0),a.on(b,c)},a.trigger=function(d){for(var e,f=c.call(arguments,1),g=b[d]||[],h=0;e=g[h];++h)e.busy||(e.busy=!0,e.apply(a,e.typed?[d].concat(f):f),e.one&&(g.splice(h,1),h--),e.busy=!1);return a},a};var d={},e={"\\":"\\\\","\n":"\\n","\r":"\\r","'":"\\'"},f={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};if(a.render=function(a,c,f){return f===!0&&(f=b),a=a||"",(d[a]=d[a]||new Function("_","e","try { return '"+a.replace(/[\\\n\r']/g,function(a){return e[a]}).replace(/{\s*([\w\.]+)\s*}/g,"' + (e?e(_.$1,'$1'):_.$1||(_.$1==undefined?'':_.$1)) + '")+"' } catch(e) { return '' }"))(c,f)},"object"==typeof top){var g,h=a.observable({}),i=window.addEventListener,j=document;i?(i("popstate",c,!1),j.addEventListener("DOMContentLoaded",c,!1)):j.attachEvent("onreadystatechange",function(){"complete"===j.readyState&&c("")}),a.route=function(a){return"function"==typeof a?h.on("pop",a):(history.pushState&&history.pushState(0,0,a),void c(a))}}}("object"==typeof top?window.riot={}:exports),function(a,b,c){"undefined"!=typeof module?module.exports=c():"function"==typeof define?define(c):b[a]=b.v=c()}("valentine",this,function(){function a(a){this.values=a,this.index=0}function b(a,b){return new d(a,b)}function c(a,b){for(var c in b)a[c]=b[c]}function d(a,b){this.val=a,this._scope=b||g,this._chained=0}var e=[],f=Object.prototype.hasOwnProperty,g=null,h=e.slice,i={each:function(a,b,c){e.forEach.call(a,b,c)},map:function(a,b,c){return e.map.call(a,b,c)},some:function(a,b,c){return a.some(b,c)},every:function(a,b,c){return a.every(b,c)},filter:function(a,b,c){return a.filter(b,c)},indexOf:function(a,b,c){return a.indexOf(b,isFinite(c)?c:0)},lastIndexOf:function(a,b,c){return a.lastIndexOf(b,isFinite(c)?c:a.length)},reduce:function(a,b,c,d){return e.reduce.call(a,b,c,d)},reduceRight:function(a,b,c,d){return e.reduceRight.call(a,b,c,d)},find:function(a,b,c){var d;return i.some(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},reject:function(a,b,c){for(var d=[],e=0,f=0,g=a.length;g>e;e++)if(e in a){if(b.call(c,a[e],e,a))continue;d[f++]=a[e]}return d},size:function(a){return k.toArray(a).length},compact:function(a){return i.filter(a,function(a){return!!a})},flatten:function(a){return i.reduce(a,function(a,b){return j.arr(b)?a.concat(i.flatten(b)):(a[a.length]=b,a)},[])},uniq:function(a,b){if(null==a)return[];for(var c=[],d=[],e=0,f=a.length;f>e;e++){var g=a[e];b&&(g=b(g,e,a)),i.inArray(d,g)||(d.push(g),c.push(a[e]))}return c},merge:function(a,b){var c,d=a.length,e=0;if(isFinite(b.length))for(c=b.length;c>e;e++)a[d++]=b[e];else for(;void 0!==b[e];)first[d++]=second[e++];return a.length=d,a},inArray:function(a,b){return!!~i.indexOf(a,b)},memo:function(a,b){var c={};return b||(b=function(a){return a}),function(){var d=b.apply(this,arguments);return f.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}},j={fun:function(a){return"function"==typeof a},str:function(a){return"string"==typeof a},ele:function(a){return!(!a||!a.nodeType||1!=a.nodeType)},arr:function(a){return a instanceof Array},arrLike:function(a){return a&&a.length&&isFinite(a.length)},num:function(a){return"number"==typeof a},bool:function(a){return a===!0||a===!1},args:function(a){return!(!a||!f.call(a,"callee"))},emp:function(a){var b=0;return j.arr(a)?0===a.length:j.obj(a)?function(){for(var c in a){b++;break}return 0===b}():""===a},dat:function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},reg:function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},nan:function(a){return a!==a},nil:function(a){return a===g},und:function(a){return"undefined"==typeof a},def:function(a){return"undefined"!=typeof a},obj:function(a){return a instanceof Object&&!j.fun(a)&&!j.arr(a)}};j.empty=j.emp,j.date=j.dat,j.regexp=j.reg,j.element=j.ele,j.array=j.arr,j.string=j.str,j.undef=j.und,j.func=j.fun;var k={each:function(a,b,c){j.arrLike(a)?i.each(a,b,c):function(){for(var d in a)f.call(a,d)&&b.call(c,d,a[d],a)}()},map:function(a,b,c){var d=[],e=0;return j.arrLike(a)?i.map(a,b,c):!function(){for(var g in a)f.call(a,g)&&(d[e++]=b.call(c,g,a[g],a))}()&&d},some:function(a,b,c){if(j.arrLike(a))return i.some(a,b,c);for(var d in a)if(f.call(a,d)&&b.call(c,d,a[d],a))return!0;return!1},every:function(a,b,c){if(j.arrLike(a))return i.every(a,b,c);for(var d in a)if(!f.call(a,d)||!b.call(c,d,a[d],a))return!1;return!0},filter:function(a,b,c){var d,e={};if(j.arrLike(a))return i.filter(a,b,c);for(d in a)f.call(a,d)&&b.call(c,d,a[d],a)&&(e[d]=a[d]);return e},pluck:function(a,b){return j.arrLike(a)?i.map(a,function(a){return a[b]}):k.map(a,function(a,c){return c[b]})},toArray:function(a){return a?j.arr(a)?a:a.toArray?a.toArray():j.args(a)?h.call(a):i.map(a,function(a){return a}):[]},first:function(a){return a[0]},last:function(a){return a[a.length-1]},keys:Object.keys,values:function(a){return k.map(a,function(a,b){return b})},extend:function(){for(var a,b,c,d,e,f=arguments[0],h=1,i=arguments.length;i>h;h++)if((a=arguments[h])!==g)for(b in a)c=f[b],d=a[b],f!==d&&(d&&j.obj(d)?(e=c&&j.obj(c)?c:{},f[b]=k.extend(e,d)):void 0!==d&&(f[b]=d));return f},trim:function(a){return a.trim()},bind:function(a,b){var c=arguments.length>2?h.call(arguments,2):null;return function(){return b.apply(a,c?c.concat(h.call(arguments)):arguments)}},curry:function(a){if(1==arguments.length)return a;var b=h.call(arguments,1);return function(){return a.apply(null,b.concat(h.call(arguments)))}},parallel:function(a,b){var c=k.toArray(arguments),d=0,e=[],f=[];if(j.arr(a)&&0===a.length||j.fun(a)&&1===c.length)throw new TypeError("Empty parallel array");j.arr(a)||(b=c.pop(),a=c),i.each(a,function(c,h){c(function(){var c=k.toArray(arguments),j=c.shift();return j?b(j):(e[h]=c,void(a.length==++d&&(e.unshift(g),i.each(e,function(a){f=f.concat(a)}),b.apply(g,f))))})})},waterfall:function(a,b){var c=k.toArray(arguments);if(j.arr(a)&&0===a.length||j.fun(a)&&1===c.length)throw new TypeError("Empty waterfall array");j.arr(a)||(b=c.pop(),a=c),function d(){var c=k.toArray(arguments);c.length||c.push(null),c.push(d);var e=c.shift();!e&&a.length?a.shift().apply(g,c):(c.pop(),c.unshift(e),b.apply(g,c))}(g)},queue:function(b){return new a(j.arrLike(b)?b:k.toArray(arguments))},debounce:function(a,b,c){function d(){function d(){e=null,b.apply(g,f)}var f=arguments,g=c||this;clearTimeout(e),e=setTimeout(d,a)}var e;return d.cancel=function(){clearTimeout(e),e=null},d},throttle:function(a,b,c){var d;return function(){var e=c||this,f=arguments;d||(d=setTimeout(function(){b.apply(e,f),d=null},a))}},throttleDebounce:function(a,b,c,d){function e(){f=arguments,g=d||this,clearTimeout(h),h=setTimeout(function(){clearTimeout(i),i=null,c.apply(g,f)},b),i||(i=setTimeout(function(){clearTimeout(h),i=null,c.apply(g,f)},a))}var f,g,h,i;return e.cancel=function(){clearTimeout(h),clearTimeout(i),i=null},e}};return a.prototype.next=function(){return this.index<this.values.length&&this.values[this.index++](),this},c(b,i),c(b,k),b.is=j,b.v=b,b.each(b.extend({},i,k),function(a,c){d.prototype[a]=function(){var a=b.toArray(arguments);a.unshift(this.val);var d=c.apply(this._scope,a);return this.val=d,this._chained?this:d}}),c(d.prototype,{chain:function(){return this._chained=1,this},value:function(){return this.val}}),b}),function(){defineModule("/leftbar/leftbar.js",function(a,b){var c,d,e,f;f=function(a){var b;return b=a.value,a.options[0].selected=!0,b},v.eacheach=function(a,b){return v.each(a,function(a){return v.each(a,b)})},d=null,e={},b.hide=function(){return xui("#puppet-leftbar").remove()},b.init=function(a,c){var g,h;return b.hide(),d=c,h=xui("template#leftbar").html()[0],xui("#puppet-overlay").bottom(riot.render(h,{})),xui("#puppet-leftbar a.bind-close").on("click",a),g=xui("#puppet-leftbar .head select"),g.on("change",function(){var a,c;return c=f(g[0]),a=e[c],a?b.addEvent(a):void 0})},b.registerEvent=function(a){var b;return b=xui("#puppet-leftbar .head select"),e[a.name]=a,b.bottom("<option>"+a.name+"</option>")},b.addEvent=function(a){var e,g,h,i;return i=xui("#puppet-leftbar"),i.bottom(riot.render(xui("template#event").html()[0],{name:a.name})),g=xui(v.last(i.find(".event"))),g.find(".bind-remove").on("click",function(){return g.remove(),!1}),(h=function(){return xui(".event-body").addClass("hide"),g.find(".event-body").removeClass("hide")})(),g.find(".event-head").on("click",h),g.find(".bind-run").on("click",function(){return d(b.serializeEvent(g)[0]),!1}),e=g.find(".attribute-add select"),e.on("change",function(){var b;return b=f(e[0]),v.eacheach(a.addable,function(a,d){return a===b?d(v.curry(c,g)):void 0})}),v.eacheach(a.current,function(a,b){return c(g,a,b)}),v.eacheach(a.addable,function(a){return e.bottom("<option>"+a+"</option>")})},c=function(a,b,c){var d,e;return v.is.array(c)?(c=v.map(c,function(a){return"<option>"+a+"</option>"}),c=c.join(""),c="<select>"+c+"<select>"):c="<input type='text' value='"+c+"'/>",e=xui("template#attribute").html()[0],d=riot.render(e,{label:b,value:c}),a.find(".attribute-add").before(d)},b.serializeEvent=function(a){var b;return b=[],a=a||xui(".event"),v.each(a,function(a){var c,d;return c=xui(a).find(".attribute"),b.push(d={name:xui(a).find(".name").text().join("").trim(),attr:{}}),v.each(c,function(a){var b,c,e;return c=xui(a).find("label"),c=c.text().join("").trim(),b=xui(a).find(".label input"),b=b[0]&&b[0].checked,e=xui(a).find(".value input, .value select"),e=e[0].value,c.length&&b?(d.attr[c]||(d.attr[c]=[]),d.attr[c].push(e)):void 0})}),b},xui.ready(function(){return b.init(b.hide,function(a){return console.log(a)}),b.registerEvent({name:"click",current:[{x:"4px"},{y:"3px"},{id:["fullid","false"]}],addable:[{"class":function(a){return a("class","")}}]})})}),require("/leftbar/leftbar.js"),require("/page.js")}();